<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('../partials/head.ejs', { title: 'Productos', stylesheet: 'products/productsList.css'}); %>
    </head>
    <body >
        <%- include('../partials/header.ejs') %>   
        <div class="main-container list">
            <div class="list-header">
                <h1 class = "titulo">Nuestros productos</h1>
            </div>
            <section>
                <% for ( let i=0; i<products.length;i++) { %> 
                <article>
                    <img src="/uploads/products/<%=products[i].image %>" alt="" class="img-thumbnail">
                    <h4><%=products[i].title %></h2>
                    <a href=<%="/products/" + products[i].id %>><button style="cursor:pointer" class="btn btn-primary center-block">Ver producto</button></a>
                </article>
                <% } %>
            </section>
            <nav style="align-self: center;" aria-label="Page navigation example">
                <ul class="pagination">
                  <li class="page-item">
                    <% if (page == 1) { %>
                    <a class="page-link disabled" href="" aria-label="Previous">
                    <% } else { %>
                    <a class="page-link" href="/products?page=<%= page-1 %>" aria-label="Previous">
                    <% } %>
                      <span aria-hidden="true">&laquo;</span>
                      <span class="sr-only">Previous</span>
                    </a>
                  </li>
                  <% if (page != 1 && total > page * 12) { %> 
                  <li class="page-item"><a class="page-link" href="/products?page=<%= page-1 %>"><%= page-1 %></a></li>
                  <li class="page-item"><a class="page-link" href="/products?page=<%= page %>"><%= page %></a></li>
                  <li class="page-item"><a class="page-link" href="/products?page=<%= page+1 %>"><%= page+1 %></a></li>
                  <% } else { %>
                  <li class="page-item"><a class="page-link" href="/products?page=<%= page == 1 ? page : page-2 %>"><%= page == 1 ? page : page-2 %></a></li>
                  <li class="page-item"><a class="page-link" href="/products?page=<%= page == 1 ? page+1 : page-1 %>"><%= page == 1 ? page+1 : page-1 %></a></li>
                  <li class="page-item"><a class="page-link" href="/products?page=<%= page == 1 ? page+2 : page %>"><%= page == 1 ? page+2 : page %></a></li>
                  <% } %>
                  <li class="page-item">
                    <% if (total <= page * 12) { %>
                    <a class="page-link disabled" href="" aria-label="Next">
                    <% } else { %>
                    <a class="page-link" href="/products?page=<%= page+1 %>" aria-label="Next">
                    <% } %>
                    <span aria-hidden="true">&raquo;</span>
                      <span class="sr-only">Next</span>
                    </a>
                  </li>
                </ul>
              </nav>
        </div>  
        <%- include('../partials/footer.ejs') %>
    </body>
        
</html>


